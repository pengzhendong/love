<!DOCTYPE HTML><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><title>Our Love Story</title><meta http-equiv="content-type" content="text/html; charset=UTF-8"><style type="text/css">@font-face{font-family:digit;src:url(digital-7_mono.ttf) format("truetype")}</style><link href="./love.css" type="text/css" rel="stylesheet"><script type="text/javascript" src="https://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script></head><body><div id="mainDiv"><div id="content"><div id="code"><span class="comments">/**</span><br><span class="space"><span class="comments">* Today is our 1st Valentine's Day,</span><br><span class="space"><span class="comments">* so I want to write some code to celebrate our 1st Valentine's Day.</span><br><span class="space"><span class="comments">*/</span><br>Boy i = <span class="keyword">new</span> Boy(<span class="string">"彭震东"</span>);<br>Girl u = <span class="keyword">new</span> Girl(<span class="string">"袁尚清"</span>);<br><span class="comments">// May 13, 2015, I told you I love you.</span><br>i.love(u);<br><span class="comments">// Luckily, you accepted at Sep 11, 2015 eversince.</span><br>u.accepted();<br><span class="comments">// Since then, I miss u every day.</span><br>i.miss(u);<br><span class="comments">// And take care of u and our love.</span><br>i.takeCareOf(u);<br><span class="comments">// You say that I always make you angry.</span><br><span class="comments">// So I try my best to do better and I have confidence that I can do well.</span><br><span class="keyword">boolean</span> isAngry = <span class="keyword">true</span>;<br><span class="keyword">while</span> (isAngry) {<br><span class="placeholder">i.cheerUp(u);<br><span class="placeholder"><span class="comments">// I have realized my fault, and I beg you to forgive me.</span><br><span class="placeholder">isAngry = u.forgive(i);<br>}<br><span class="keyword">while</span> (i.quality &lt; u.expected) {<br><span class="comments">// In the future I will work hard to be your excepted husband.</span><br><span class="placeholder">i.workHard++;<br><span class="placeholder">i.quality++;<br>}<br><span class="comments">// After a romantic wedding, we will live happily ever after.</span><br>i.marry(u);<br>i.liveHappilyWith(u);<br></div><div id="loveHeart"><canvas id="garden"></canvas><div id="words"><div id="messages">尚清, I have fallen in love with you for<div id="elapseClock"></div></div><div id="loveu">Love u forever and ever.<br><div class="signature">- 震东</div></div></div></div></div></div><!-- functions.js --><script type="text/javascript">function getHeartPoint(t){var e=t/Math.PI,n=16*Math.pow(Math.sin(e),3)*19.5,a=-20*(13*Math.cos(e)-5*Math.cos(2*e)-2*Math.cos(3*e)-Math.cos(4*e));return new Array(offsetX+n,offsetY+a)}function startHeartAnimation(){var t=50,i=10,s=new Array,r=setInterval(function(){for(var t=getHeartPoint(i),e=!0,n=0;n<s.length;n++){var a=s[n],o=Math.sqrt(Math.pow(a[0]-t[0],2)+Math.pow(a[1]-t[1],2));if(o<1.3*Garden.options.bloomRadius.max){e=!1;break}}e&&(s.push(t),garden.createRandomBloom(t[0],t[1])),30<=i?(clearInterval(r),showMessages()):i+=.2},t)}function timeElapse(t){var e=Date(),n=(Date.parse(e)-Date.parse(t))/1e3,a=Math.floor(n/86400);n%=86400;var o=Math.floor(n/3600);o<10&&(o="0"+o),n%=3600;var i=Math.floor(n/60);i<10&&(i="0"+i),n%=60,n<10&&(n="0"+n);var s='<span class="digit">'+a+'</span> days <span class="digit">'+o+'</span> hours <span class="digit">'+i+'</span> minutes <span class="digit">'+n+"</span> seconds";$("#elapseClock").html(s)}function showMessages(){adjustWordsPosition(),$("#messages").fadeIn(5e3,function(){showLoveU()})}function adjustWordsPosition(){$("#words").css("position","absolute"),$("#words").css("top",$("#garden").position().top+195),$("#words").css("left",$("#garden").position().left+70)}function adjustCodePosition(){$("#code").css("margin-top",($("#garden").height()-$("#code").height())/2)}function showLoveU(){$("#loveu").fadeIn(3e3)}var gardenCtx,gardenCanvas,$garden,garden,$window=$(window),clientWidth=$(window).width(),clientHeight=$(window).height();$(function(){$loveHeart=$("#loveHeart");$loveHeart.width(),$loveHeart.height();$garden=$("#garden"),gardenCanvas=$garden[0],gardenCanvas.width=$("#loveHeart").width(),gardenCanvas.height=$("#loveHeart").height(),gardenCtx=gardenCanvas.getContext("2d"),gardenCtx.globalCompositeOperation="lighter",garden=new Garden(gardenCtx,gardenCanvas),$("#content").css("width",$loveHeart.width()+$("#code").width()),$("#content").css("height",Math.max($loveHeart.height(),$("#code").height())),$("#content").css("margin-top",Math.max(($window.height()-$("#content").height())/2,10)),$("#content").css("margin-left",Math.max(($window.width()-$("#content").width())/2,10)),setInterval(function(){garden.render()},Garden.options.growSpeed)}),$(window).resize(function(){var t=$(window).width(),e=$(window).height();t!=clientWidth&&e!=clientHeight&&location.replace(location)}),function(t){t.fn.typewriter=function(){return this.each(function(){var e=t(this),n=e.html(),a=0;e.html("");var o=setInterval(function(){var t=n.substr(a,1);"<"==t?a=n.indexOf(">",a)+1:a++,e.html(n.substring(0,a)+(1&a?"_":"")),a>=n.length&&clearInterval(o)},75)}),this}}(jQuery)</script><!-- garden.js --><script type="text/javascript">function Vector(t,n){this.x=t,this.y=n}function Petal(t,n,o,r,e,i){this.stretchA=t,this.stretchB=n,this.startAngle=o,this.angle=r,this.bloom=i,this.growFactor=e,this.r=1,this.isfinished=!1}function Bloom(t,n,o,r,e){this.p=t,this.r=n,this.c=o,this.pc=r,this.petals=[],this.garden=e,this.init(),this.garden.addBloom(this)}function Garden(t,n){this.blooms=[],this.element=n,this.ctx=t}Vector.prototype={rotate:function(t){var n=this.x,o=this.y;return this.x=Math.cos(t)*n-Math.sin(t)*o,this.y=Math.sin(t)*n+Math.cos(t)*o,this},mult:function(t){return this.x*=t,this.y*=t,this},clone:function(){return new Vector(this.x,this.y)},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},set:function(t,n){return this.x=t,this.y=n,this}},Petal.prototype={draw:function(){var t,n,o,r,e=this.bloom.garden.ctx;t=new Vector(0,this.r).rotate(Garden.degrad(this.startAngle)),n=t.clone().rotate(Garden.degrad(this.angle)),o=t.clone().mult(this.stretchA),r=n.clone().mult(this.stretchB),e.strokeStyle=this.bloom.c,e.beginPath(),e.moveTo(t.x,t.y),e.bezierCurveTo(o.x,o.y,r.x,r.y,n.x,n.y),e.stroke()},render:function(){this.r<=this.bloom.r?(this.r+=this.growFactor,this.draw()):this.isfinished=!0}},Bloom.prototype={draw:function(){var t,n=!0;this.garden.ctx.save(),this.garden.ctx.translate(this.p.x,this.p.y);for(var o=0;o<this.petals.length;o++)t=this.petals[o],t.render(),n*=t.isfinished;this.garden.ctx.restore(),1==n&&this.garden.removeBloom(this)},init:function(){for(var t=360/this.pc,n=Garden.randomInt(0,90),o=0;o<this.pc;o++)this.petals.push(new Petal(Garden.random(Garden.options.petalStretch.min,Garden.options.petalStretch.max),Garden.random(Garden.options.petalStretch.min,Garden.options.petalStretch.max),n+o*t,t,Garden.random(Garden.options.growFactor.min,Garden.options.growFactor.max),this))}},Garden.prototype={render:function(){for(var t=0;t<this.blooms.length;t++)this.blooms[t].draw()},addBloom:function(t){this.blooms.push(t)},removeBloom:function(t){for(var n,o=0;o<this.blooms.length;o++)if(n=this.blooms[o],n===t)return this.blooms.splice(o,1),this},createRandomBloom:function(t,n){this.createBloom(t,n,Garden.randomInt(Garden.options.bloomRadius.min,Garden.options.bloomRadius.max),Garden.randomrgba(Garden.options.color.rmin,Garden.options.color.rmax,Garden.options.color.gmin,Garden.options.color.gmax,Garden.options.color.bmin,Garden.options.color.bmax,Garden.options.color.opacity),Garden.randomInt(Garden.options.petalCount.min,Garden.options.petalCount.max))},createBloom:function(t,n,o,r,e){new Bloom(new Vector(t,n),o,r,e,this)},clear:function(){this.blooms=[],this.ctx.clearRect(0,0,this.element.width,this.element.height)}},Garden.options={petalCount:{min:8,max:15},petalStretch:{min:.1,max:3},growFactor:{min:.1,max:1},bloomRadius:{min:8,max:10},density:10,growSpeed:1e3/60,color:{rmin:128,rmax:255,gmin:0,gmax:128,bmin:0,bmax:128,opacity:.1},tanAngle:60},Garden.random=function(t,n){return Math.random()*(n-t)+t},Garden.randomInt=function(t,n){return Math.floor(Math.random()*(n-t+1))+t},Garden.circle=2*Math.PI,Garden.degrad=function(t){return Garden.circle/360*t},Garden.raddeg=function(t){return t/Garden.circle*360},Garden.rgba=function(t,n,o,r){return"rgba("+t+","+n+","+o+","+r+")"},Garden.randomrgba=function(t,n,o,r,e,i,a){var s=Math.round(Garden.random(t,n)),h=Math.round(Garden.random(o,r)),d=Math.round(Garden.random(e,i)),c=5;return Math.abs(s-h)<=c&&Math.abs(h-d)<=c&&Math.abs(d-s)<=c?Garden.rgba(t,n,o,r,e,i,a):Garden.rgba(s,h,d,a)}</script><script type="text/javascript">var offsetX=$("#loveHeart").width()/2,offsetY=$("#loveHeart").height()/2-55,together=new Date;if(together.setFullYear(2015,3,28),together.setHours(19),together.setMinutes(30),together.setSeconds(0),together.setMilliseconds(0),document.createElement("canvas").getContext)setTimeout(function(){startHeartAnimation()},5e3),timeElapse(together),setInterval(function(){timeElapse(together)},500),adjustCodePosition(),$("#code").typewriter();else{var msg=document.createElement("div");msg.id="errorMsg",msg.innerHTML="Your browser doesn't support HTML5!<br/>Recommend use Chrome 14+/IE 9+/Firefox 7+/Safari 4+",document.body.appendChild(msg),$("#code").css("display","none"),$("#copyright").css("position","absolute"),$("#copyright").css("bottom","10px"),document.execCommand("stop")}</script></body></html>